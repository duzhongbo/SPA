---
layout: default
title: 杜忠波的个人网站
---


<div class="index">
	<ul class="index-article-ul">
		<li class="index-article-li">
			<a href="###" class="index-article-a">12121</a>
		</li>
		<li class="index-article-li">
			<a href="###" class="index-article-a">12122</a>
		</li>
		<li class="index-article-li">
			<a href="###" class="index-article-a">12123</a>
		</li>
	</ul>
</div>

<script src="js/json2.js"></script>
<script src="js/jquery.js"></script>
<script src="js/underscore.js"></script>
<script src="js/backbone.js"></script>
<script src="js/backbone.localStorage.js"></script>
<script src="js/main.js"></script>

<!-- 引入数据 -->
{% include data.html %}	
<script type="text/javascript">
$(function () {
	var M = Backbone.Model.extend({
		defaults : {
			data : aData.article
		}
	});
	var V = Backbone.View.extend({
		initialize : function () {
			this.show();
		},
		show:function (model) {
			$('.index-article-ul').html(this.template(this.model.toJSON()));
		},
		template:_.template($('#template').html()),
		el:$('body'),
		events:{
			'click a':'showDetail',
		},
		showDetail:function (e) {
			var target = e.target || e.srcElement;
			console.log(target);
			var url = $(target).attr('href');
			location.hash='article'+url;
			return false;
		}
	});
	var m = new M;
	var v = new V({model:m});
});

// 路由与历史管理
var Workspace = Backbone.Router.extend({
	routes: {
		'article/:year/:month/:date/:title':'showDetail',// #article/kiwis
	},
	showDetail:function (year,month,date,title) {
		var url = '/'+year+'/'+month+'/'+date+'/'+title;
		for(var i=0,data=aData.article,len=data.length;i<len;i++){
			if(data[i].url==url){
				console.log(data[i].content);
				$('.index').html(data[i].content);
			}
		}
	}
});

var w = new Workspace;
Backbone.history.start();



</script>





<script type="text/template" id="template">

<% for(var i=0,len=data.length;i<len;i++) { %>
	<li class="index-article-li">
		<a href="<%= data[i].url %>" class="index-article-a"><%= data[i].title %></a>
	</li>
<% } %>

</script>